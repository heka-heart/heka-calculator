<div class="heka-equity-wrapper">
  <style>
    .heka-equity-wrapper {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 20px;
      box-sizing: border-box;
      background: #081a37; /* tweak to match exact brand blue if needed */
    }

    .heka-equity-card,
    .heka-password-card {
      max-width: 760px;
      width: 100%;
      background: #ffffff;
      border-radius: 18px;
      padding: 32px 28px 28px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Helvetica Neue", Arial, sans-serif;
    }

    .heka-equity-header {
      margin-bottom: 24px;
    }

    .heka-equity-eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 11px;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .heka-equity-title {
      font-size: 24px;
      line-height: 1.3;
      font-weight: 650;
      margin: 0 0 8px 0;
      color: #0f172a;
    }

    .heka-equity-subtitle {
      font-size: 14px;
      color: #4b5563;
      margin: 0;
    }

    .heka-equity-input-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 12px;
      margin: 24px 0 18px;
    }

    .heka-equity-input-label {
      font-size: 14px;
      font-weight: 500;
      color: #111827;
      flex: 0 0 auto;
    }

    .heka-equity-input {
      flex: 0 0 180px;
      max-width: 220px;
      padding: 10px 12px;
      font-size: 14px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      box-sizing: border-box;
      background: #f9fafb;
    }

    .heka-equity-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.3);
      background: #ffffff;
    }

    .heka-equity-hint {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
    }

    .heka-equity-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin: 18px 0 24px;
    }

    .heka-equity-pill {
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      background: #f9fafb;
    }

    .heka-equity-pill-label {
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #6b7280;
      margin-bottom: 4px;
      font-weight: 600;
    }

    .heka-equity-pill-value {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
    }

    .heka-equity-table-wrapper {
      overflow-x: auto;
      margin-top: 4px;
    }

    .heka-equity-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 4px;
    }

    .heka-equity-table th,
    .heka-equity-table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
      white-space: nowrap;
    }

    .heka-equity-table th {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
      font-weight: 600;
      background: #f9fafb;
    }

    .heka-equity-table tr:last-child td {
      border-bottom: none;
    }

    .heka-equity-row-label {
      font-weight: 500;
      color: #111827;
    }

    .heka-growth-section {
      margin-top: 28px;
      padding-top: 18px;
      border-top: 1px solid #e5e7eb;
    }

    .heka-growth-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 6px;
    }

    .heka-growth-subtitle {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 14px;
    }

    .heka-growth-bars {
      display: grid;
      gap: 10px;
    }

    .heka-growth-row-label {
      font-size: 12px;
      color: #111827;
      margin-bottom: 2px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .heka-growth-row-label span:last-child {
      font-size: 11px;
      color: #6b7280;
    }

    .heka-growth-bar-track {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .heka-growth-bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #38bdf8, #22c55e);
      transform-origin: left center;
      transform: scaleX(0);
      transition: transform 0.8s ease-out;
    }

    .heka-equity-footnote {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 18px;
      line-height: 1.5;
    }

    /* Password gate styles */
    .heka-password-card-title {
      font-size: 22px;
      font-weight: 650;
      margin: 0 0 8px 0;
      color: #0f172a;
    }

    .heka-password-subtitle {
      font-size: 14px;
      color: #4b5563;
      margin: 0 0 20px 0;
    }

    .heka-password-form {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      margin-bottom: 8px;
    }

    .heka-password-input {
      flex: 0 0 200px;
      max-width: 260px;
      padding: 10px 12px;
      font-size: 14px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      box-sizing: border-box;
      background: #f9fafb;
    }

    .heka-password-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.3);
      background: #ffffff;
    }

    .heka-password-button {
      padding: 10px 18px;
      font-size: 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #111827;
      color: #ffffff;
      font-weight: 500;
    }

    .heka-password-error {
      font-size: 12px;
      color: #b91c1c;
      min-height: 16px;
      margin-top: 4px;
    }

    .heka-password-hint {
      font-size: 11px;
      color: #6b7280;
      margin-top: 8px;
    }

    @media (max-width: 600px) {
      .heka-equity-card,
      .heka-password-card {
        padding: 24px 18px;
        border-radius: 14px;
      }

      .heka-equity-title,
      .heka-password-card-title {
        font-size: 20px;
      }

      .heka-password-form {
        flex-direction: column;
        align-items: stretch;
      }

      .heka-password-button {
        width: 100%;
        text-align: center;
      }
    }
  </style>

  <!-- Password Gate -->
  <div class="heka-password-card" id="heka-password-card">
    <h2 class="heka-password-card-title">Internal Access</h2>
    <p class="heka-password-subtitle">
      This tool is for HekaHeart team members and authorized recipients only. 
      Please enter the access code shared with you to view the equity value calculator.
    </p>

    <form class="heka-password-form" id="heka-password-form">
      <input
        type="password"
        id="heka-password-input"
        class="heka-password-input"
        placeholder="Access code"
        autocomplete="off"
      />
      <button type="submit" class="heka-password-button">
        Unlock calculator
      </button>
    </form>
    <div class="heka-password-error" id="heka-password-error"></div>
    <div class="heka-password-hint">
      Do not share this link or code externally. For questions, contact People Ops or the founding team.
    </div>
  </div>

  <!-- Calculator (initially hidden) -->
  <div
    class="heka-equity-card"
    id="heka-equity-calculator"
    style="display: none;"
  >
    <div class="heka-equity-header">
      <div class="heka-equity-eyebrow">HekaHeart</div>
      <h2 class="heka-equity-title">Equity Value Projection</h2>
      <p class="heka-equity-subtitle">
        See how the value of your HekaHeart shares could evolve over time based on current
        projections. Enter your number of shares below.
      </p>
    </div>

    <div class="heka-equity-input-row">
      <label class="heka-equity-input-label" for="heka-shares-input">
        Your shares
      </label>
      <input
        id="heka-shares-input"
        class="heka-equity-input"
        type="number"
        min="0"
        step="1"
        placeholder="e.g. 10,000"
      />
    </div>
    <div class="heka-equity-hint">
      Example: If you have options for 10,000 shares, enter <strong>10000</strong> (no commas).
    </div>

    <div class="heka-equity-summary">
      <div class="heka-equity-pill">
        <div class="heka-equity-pill-label">Current price per share*</div>
        <div class="heka-equity-pill-value" id="heka-current-price">$2.60</div>
      </div>
      <div class="heka-equity-pill">
        <div class="heka-equity-pill-label">Your current value*</div>
        <div class="heka-equity-pill-value" id="heka-current-value">$0.00</div>
      </div>
    </div>

    <div class="heka-equity-table-wrapper">
      <table class="heka-equity-table">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>Projected valuation</th>
            <th>Your value</th>
          </tr>
        </thead>
        <tbody id="heka-equity-rows"></tbody>
      </table>
    </div>

    <div class="heka-growth-section">
      <div class="heka-growth-title">Growth over time</div>
      <div class="heka-growth-subtitle">
        How HekaHeart’s projected valuation scales relative to today.
      </div>
      <div class="heka-growth-bars" id="heka-growth-bars"></div>
    </div>

    <div class="heka-equity-footnote">
      *This calculator provides an estimated face value of equity based solely on the company’s 
      projected valuations and fully diluted share count. It does <strong>not</strong> account for 
      strike prices, exercise costs, alternative minimum tax (AMT), ordinary income or capital gains 
      tax liabilities, vesting schedules, liquidity risk, or any other financial, legal, or tax 
      considerations associated with stock options or equity compensation. Actual realized value may 
      differ substantially and is not guaranteed. This tool is for informational purposes only and 
      should not be relied upon as financial, tax, or investment advice.
    </div>
  </div>

  <script>
    (function () {
      // ----- Access code gate -----
      // IMPORTANT: change this to the access code you're already using
      const ACCESS_CODE = "hekaheart!";

      var passwordCard = document.getElementById("heka-password-card");
      var calculatorCard = document.getElementById("heka-equity-calculator");
      var passwordForm = document.getElementById("heka-password-form");
      var passwordInput = document.getElementById("heka-password-input");
      var passwordError = document.getElementById("heka-password-error");

      passwordForm.addEventListener("submit", function (e) {
        e.preventDefault();
        var entered = (passwordInput.value || "").trim();

        if (!entered) {
          passwordError.textContent = "Please enter the access code.";
          return;
        }

        if (entered === ACCESS_CODE) {
          passwordError.textContent = "";
          passwordInput.value = "";
          passwordCard.style.display = "none";
          calculatorCard.style.display = "block";
        } else {
          passwordError.textContent = "Incorrect access code. Please try again.";
        }
      });

      // ----- Calculator logic -----
      var TOTAL_SHARES = 10000000;
      var scenarios = [
        { label: "Today (current)", value: 26000000 },
        { label: "End of 2026", value: 92000000 },
        { label: "End of 2027", value: 280000000 },
        { label: "End of 2028", value: 660000000 },
      ];

      var input = document.getElementById("heka-shares-input");
      var rowsContainer = document.getElementById("heka-equity-rows");
      var currentPriceEl = document.getElementById("heka-current-price");
      var currentValueEl = document.getElementById("heka-current-value");
      var growthBarsContainer = document.getElementById("heka-growth-bars");

      function formatCurrency(value) {
        if (!isFinite(value)) return "$0.00";
        try {
          return value.toLocaleString(undefined, {
            style: "currency",
            currency: "USD",
            maximumFractionDigits: 2,
          });
        } catch (e) {
          return (
            "$" +
            (Math.round(value * 100) / 100)
              .toString()
              .replace(/\B(?=(\d{3})+(?!\d))/g, ",")
          );
        }
      }

      function renderTable() {
        var sharesRaw = (input && input.value) || "0";
        var shares = parseFloat(sharesRaw.replace(/,/g, "")) || 0;

        rowsContainer.innerHTML = "";

        scenarios.forEach(function (s, idx) {
          var pricePerShare = s.value / TOTAL_SHARES;
          var userValue = pricePerShare * shares;

          var tr = document.createElement("tr");
          tr.innerHTML =
            '<td class="heka-equity-row-label">' +
            s.label +
            "</td>" +
            "<td>" +
            formatCurrency(s.value) +
            "</td>" +
            "<td>" +
            formatCurrency(userValue) +
            "</td>";

          rowsContainer.appendChild(tr);

          if (idx === 0) {
            currentPriceEl.textContent = formatCurrency(pricePerShare);
            currentValueEl.textContent = formatCurrency(userValue);
          }
        });
      }

      function renderGrowthBars() {
        var maxVal = Math.max.apply(
          null,
          scenarios.map(function (s) {
            return s.value;
          })
        );
        var baseVal = scenarios[0].value;

        growthBarsContainer.innerHTML = "";

        scenarios.forEach(function (s, idx) {
          var multiple = s.value / baseVal;
          var width = (s.value / maxVal) * 100;

          var row = document.createElement("div");

          var label = document.createElement("div");
          label.className = "heka-growth-row-label";
          label.innerHTML =
            "<span>" +
            s.label +
            "</span><span>" +
            (idx === 0 ? "baseline" : multiple.toFixed(1) + "× today") +
            "</span>";

          var track = document.createElement("div");
          track.className = "heka-growth-bar-track";

          var fill = document.createElement("div");
          fill.className = "heka-growth-bar-fill";
          fill.style.width = width + "%";

          track.appendChild(fill);
          row.appendChild(label);
          row.appendChild(track);
          growthBarsContainer.appendChild(row);

          // trigger animation
          setTimeout(function () {
            fill.style.transform = "scaleX(1)";
          }, 50 + idx * 120);
        });
      }

      // Initial renders
      renderTable();
      renderGrowthBars();

      if (input) {
        input.addEventListener("input", renderTable);
      }
    })();
  </script>
</div>
